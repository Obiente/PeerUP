---
export interface Props {
  icon: `${string}:${string}`;
  class?: string;
  [key: string]: any;
}

const { icon, class: className = "" } = Astro.props;

import { getIconData, iconToSVG, iconToHTML, replaceIDs } from "@iconify/utils";

const [iconPack, iconName] = icon.split(":");
const { icons } = await import(`@iconify-json/${iconPack}`);
const iconData = getIconData(icons, iconName);
if (!iconData) {
  return;
}

const renderData = iconToSVG(iconData, {
  height: "auto",
});
const svg = iconToHTML(replaceIDs(renderData.body), renderData.attributes);
---

<span class={className} set:html={svg} />
